{% extends 'base.html' %} 
{% block content %}
<div class="pt-4 flex justify-center">
  <div class="card w-full max-w-lg shadow-2xl bg-base-100">
    <form method="post" class="card-body">
      <h2 class="card-title text-2xl">Edit Profil</h2>
      <p class="text-sm text-neutral-500 mb-4">Update your profile information below.</p>

      {% csrf_token %}

      {% if form.non_field_errors %}
        <div role="alert" class="alert alert-error">
          {% for error in form.non_field_errors %}
            <span>{{ error }}</span>
          {% endfor %}
        </div>
      {% endif %}

      <div class="form-control">
        <label class="label" for="{{ form.username.id_for_label }}">
          <span class="label-text">Username</span>
        </label>
        {{ form.username }}
        {% for error in form.username.errors %}
          <label class="label">
            <span class="label-text-alt text-error">{{ error }}</span>
          </label>
        {% endfor %}
      </div>
      
      <div class="form-control">
        <label class="label" for="{{ form.email.id_for_label }}">
          <span class="label-text">Email</span>
        </label>
        {{ form.email }}
        {% for error in form.email.errors %}
          <label class="label">
            <span class="label-text-alt text-error">{{ error }}</span>
          </label>
        {% endfor %}
      </div>

      <div class="form-control">
        <label class="label" for="{{ form.first_name.id_for_label }}">
          <span class="label-text">First Name</span>
        </label>
        {{ form.first_name }}
        {% for error in form.first_name.errors %}
          <label class="label">
            <span class="label-text-alt text-error">{{ error }}</span>
          </label>
        {% endfor %}
      </div>
      
      <div class="form-control">
        <label class="label" for="{{ form.last_name.id_for_label }}">
          <span class="label-text">Last Name</span>
        </label>
        {{ form.last_name }}
        {% for error in form.last_name.errors %}
          <label class="label">
            <span class="label-text-alt text-error">{{ error }}</span>
          </label>
        {% endfor %}
      </div>
       
      <div class="form-control mt-6">
        <a href="{% url 'home' %}" type="button" class="my-1 btn btn-error">Cancel</a>
        <button type="submit" class="my-1 btn btn-primary">Save Changes</button>
      </div>

    </form>
  </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const fields = ['username', 'email', 'first_name', 'last_name'];
        const form = document.querySelector('form');

        fields.forEach(function(fieldName) {
            const field = form.elements[fieldName];
            if (field) {
                field.classList.add('input', 'input-bordered', 'w-full');
                const errorLabel = document.querySelector(`label[for="${field.id}"] + .label .text-error`);
                if (errorLabel) {
                    field.classList.add('input-error');
                }
            }
        });
    });
</script>
{% endblock %}